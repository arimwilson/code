<!DOCTYPE HTML>
<html lang="en">
<head>
<title>NeuralGo</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript">
modelId = "";

serializedNetwork = ""
function getSerializedNetwork(event) {
  reader = new FileReader();
  reader.onload = function() {
    serializedNetwork = reader.result;
  }
  reader.readAsText(event.target.files[0]);
}

trainingExamples = ""
function getTrainingExamples(event) {
  reader = new FileReader();
  reader.onload = function() {
    trainingExamples = reader.result;
  }
  reader.readAsText(event.target.files[0]);
}

testingExamples = ""
function getTestingExamples(event) {
  reader = new FileReader();
  reader.onload = function(event) {
    testingExamples = reader.result;
  }
  reader.readAsText(event.target.files[0]);
}

function create(form) {
  $.post(
      "/create",
      { serializedNetwork: serializedNetwork,
        inputs: form.inputs.value,
        neuronsNumber: form.neuronsNumber.value,
        neuronsFunction: form.neuronsFunction.value },
      function(data) {
        modelId = data;
      },
      "text");
}

function train(form) {
  $.post(
      "/train",
      { modelId: modelId,
        trainingExamples: trainingExamples,
        trainingIterations: form.trainingIterations.value,
        trainingSpeed: form.trainingSpeed.value },
      function(data) {
        $("#output").val($("#output").val() + data);
      },
      "text");
}

function test(form) {
  $.post(
      "/test",
      { modelId: modelId,
        testingExamples: testingExamples },
      function(data) {
        $("#output").val($("#output").val() + data);
      },
      "text");
}


function evaluate(form) {
  $.post(
      "/evaluate",
      { modelId: modelId, features: form.features.value },
      function(data) {
        $("#output").val($("#output").val() + data);
      },
      "text");
}

function get(form) {
  $.post(
      "/get",
      { modelId: modelId },
      function(data) {
        $("#output").val($("#output").val() + data);
      },
      "text");
}
</script>
</head>
<body>
<form action="javascript:create(this)">
<b>Create the network</b><br>
Serialized network file (<a href="https://raw.githubusercontent.com/evilrobot69/code/master/NeuralGo/examples/simple/network.txt">example</a>): <input type="file" id="serializedNetwork" onchange="getSerializedNetwork(event)"> <b>or</b><br>
Number of inputs: <input type="number" id="inputs" value=2 min=1><br>
Layers & number of neurons: <input type="text" id="neuronsNumber" value="[10, 1]"><br>
Neuron activation function by layer: <input type="text" id="neuronsFunction" value='["ReLU", "Linear"]'><br>
<input type="submit" value="Create">
</form><br><br>
<form action="javascript:train(this)">
<b>Train the network</b><br>
Training file (<a href="https://raw.githubusercontent.com/evilrobot69/code/master/NeuralGo/examples/circle/training.txt">example</a>): <input type="file" id="trainingExamples" onchange="getTrainingExamples(event)"><br>
Training iterations: <input type="number" id="trainingIterations" value=1000 min=0><br>
Training speed: <input type="number" id="trainingSpeed" value=0.001 step="any" min=0><br>
<input type="submit" value="Train">
</form><br><br>
<b>Test the network</b><br>
<form action="javascript:test(this)">
Testing file (<a href="https://raw.githubusercontent.com/evilrobot69/code/master/NeuralGo/examples/circle/testing.txt">example</a>): <input type="file" id="testingExamples" onchange="getTestingExamples(event)"><br>
<input type="submit" value="Test">
</form><br><br>
<b>Evaluate the neural network at a point</b><br>
<form action="javascript:evaluate(this)">
<input type="text" id="features" value="[1, 1]">
<input type="submit" value="Evaluate">
</form><br><br>
<b>Output</b><br>
<form action="javascript:get(this)">
<input type="submit" value="Get network">
</form><br>
<textarea id="output" cols=80 rows=40 readonly></textarea>
</body>
</html>

